import{r as e,s as t,v as n,aC as a,G as r,o,p as l,q as i,_ as u,y as s,F as c,a6 as d,E as f,R as p,P as v,aH as m,aN as g,aI as h,aJ as b}from"./index-aeca932e.js";function x(e){return!(!e.addonBefore&&!e.addonAfter)}function y(e){return!!(e.prefix||e.suffix||e.allowClear)}function w(e,t,n,a){if(n){var r=t;if("click"===t.type){var o=e.cloneNode(!0);return r=Object.create(t,{target:{value:o},currentTarget:{value:o}}),o.value="",void n(r)}if(void 0!==a)return r=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=a,void n(r);n(r)}}function C(e){return null==e?"":String(e)}var z,E=function(o){var l=o.inputElement,i=o.prefixCls,u=o.prefix,s=o.suffix,c=o.addonBefore,d=o.addonAfter,f=o.className,p=o.style,v=o.affixWrapperClassName,m=o.groupClassName,g=o.wrapperClassName,h=o.disabled,b=o.readOnly,w=o.focused,C=o.triggerFocus,z=o.allowClear,E=o.value,S=o.handleReset,N=o.hidden,A=e.useRef(null),R=e.cloneElement(l,{value:E,hidden:N});if(y(o)){var P,V="".concat(i,"-affix-wrapper"),k=t(V,(n(P={},"".concat(V,"-disabled"),h),n(P,"".concat(V,"-focused"),w),n(P,"".concat(V,"-readonly"),b),n(P,"".concat(V,"-input-with-clear-btn"),s&&z&&E),P),!x(o)&&f,v),T=(s||z)&&a.createElement("span",{className:"".concat(i,"-suffix")},function(){var e;if(!z)return null;var o=!h&&!b&&E,l="".concat(i,"-clear-icon"),u="object"===r(z)&&null!=z&&z.clearIcon?z.clearIcon:"âœ–";return a.createElement("span",{onClick:S,onMouseDown:function(e){return e.preventDefault()},className:t(l,(e={},n(e,"".concat(l,"-hidden"),!o),n(e,"".concat(l,"-has-suffix"),!!s),e)),role:"button",tabIndex:-1},u)}(),s);R=a.createElement("span",{className:k,style:p,hidden:!x(o)&&N,onClick:function(e){var t;null!==(t=A.current)&&void 0!==t&&t.contains(e.target)&&(null==C||C())},ref:A},u&&a.createElement("span",{className:"".concat(i,"-prefix")},u),e.cloneElement(l,{style:null,value:E,hidden:null}),T)}if(x(o)){var F="".concat(i,"-group"),D="".concat(F,"-addon"),j=t("".concat(i,"-wrapper"),F,g),I=t("".concat(i,"-group-wrapper"),f,m);return a.createElement("span",{className:I,style:p,hidden:N},a.createElement("span",{className:j},c&&a.createElement("span",{className:D},c),e.cloneElement(R,{style:null,hidden:null}),d&&a.createElement("span",{className:D},d)))}return R},S=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","inputClassName"],N=e.forwardRef((function(d,f){var p=d.autoComplete,v=d.onChange,m=d.onFocus,g=d.onBlur,h=d.onPressEnter,b=d.onKeyDown,z=d.prefixCls,N=void 0===z?"rc-input":z,A=d.disabled,R=d.htmlSize,P=d.className,V=d.maxLength,k=d.suffix,T=d.showCount,F=d.type,D=void 0===F?"text":F,j=d.inputClassName,I=o(d,S),B=l(d.defaultValue,{value:d.value}),H=i(B,2),K=H[0],M=H[1],O=e.useState(!1),_=i(O,2),L=_[0],W=_[1],Y=e.useRef(null),q=function(e){Y.current&&function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var a=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(a,a);break;default:e.setSelectionRange(0,a)}}}}(Y.current,e)};e.useImperativeHandle(f,(function(){return{focus:q,blur:function(){var e;null===(e=Y.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var a;null===(a=Y.current)||void 0===a||a.setSelectionRange(e,t,n)},select:function(){var e;null===(e=Y.current)||void 0===e||e.select()},input:Y.current}})),e.useEffect((function(){W((function(e){return(!e||!A)&&e}))}),[A]);var G,J=function(e){void 0===d.value&&M(e.target.value),Y.current&&w(Y.current,e,v)},X=function(e){h&&"Enter"===e.key&&h(e),null==b||b(e)},Q=function(e){W(!0),null==m||m(e)},U=function(e){W(!1),null==g||g(e)};return a.createElement(E,u({},I,{prefixCls:N,className:P,inputElement:(G=s(d,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","affixWrapperClassName","groupClassName","inputClassName","wrapperClassName","htmlSize"]),a.createElement("input",u({autoComplete:p},G,{onChange:J,onFocus:Q,onBlur:U,onKeyDown:X,className:t(N,n({},"".concat(N,"-disabled"),A),j,!x(d)&&!y(d)&&P),ref:Y,size:R,type:D}))),handleReset:function(e){M(""),q(),Y.current&&w(Y.current,e,v)},value:C(K),focused:L,triggerFocus:q,suffix:function(){var e=Number(V)>0;if(k||T){var o=C(K),l=c(o).length,i="object"===r(T)?T.formatter({value:o,count:l,maxLength:V}):"".concat(l).concat(e?" / ".concat(V):"");return a.createElement(a.Fragment,null,!!T&&a.createElement("span",{className:t("".concat(N,"-show-count-suffix"),n({},"".concat(N,"-show-count-has-suffix"),!!k))},i),k)}return null}(),disabled:A}))})),A=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break"],R={};function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;z||((z=document.createElement("textarea")).setAttribute("tab-index","-1"),z.setAttribute("aria-hidden","true"),document.body.appendChild(z)),e.getAttribute("wrap")?z.setAttribute("wrap",e.getAttribute("wrap")):z.removeAttribute("wrap");var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&R[n])return R[n];var a=window.getComputedStyle(e),r=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),o=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),l=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),i={sizingStyle:A.map((function(e){return"".concat(e,":").concat(a.getPropertyValue(e))})).join(";"),paddingSize:o,borderSize:l,boxSizing:r};return t&&n&&(R[n]=i),i}(e,t),o=r.paddingSize,l=r.borderSize,i=r.boxSizing,u=r.sizingStyle;z.setAttribute("style","".concat(u,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),z.value=e.value||e.placeholder||"";var s,c=void 0,d=void 0,f=z.scrollHeight;if("border-box"===i?f+=l:"content-box"===i&&(f-=o),null!==n||null!==a){z.value=" ";var p=z.scrollHeight-o;null!==n&&(c=p*n,"border-box"===i&&(c=c+o+l),f=Math.max(c,f)),null!==a&&(d=p*a,"border-box"===i&&(d=d+o+l),s=f>d?"":"hidden",f=Math.min(d,f))}var v={height:f,overflowY:s,resize:"none"};return c&&(v.minHeight=c),d&&(v.maxHeight=d),v}var V=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],k=e.forwardRef((function(a,s){var c=a.prefixCls,m=void 0===c?"rc-textarea":c;a.onPressEnter;var g=a.defaultValue,h=a.value,b=a.autoSize,x=a.onResize,y=a.className,w=a.style,C=a.disabled,z=a.onChange;a.onInternalAutoSize;var E=o(a,V),S=l(g,{value:h,postState:function(e){return null!=e?e:""}}),N=i(S,2),A=N[0],R=N[1],k=e.useRef();e.useImperativeHandle(s,(function(){return{textArea:k.current}}));var T=e.useMemo((function(){return b&&"object"===r(b)?[b.minRows,b.maxRows]:[]}),[b]),F=i(T,2),D=F[0],j=F[1],I=!!b,B=e.useState(2),H=i(B,2),K=H[0],M=H[1],O=e.useState(),_=i(O,2),L=_[0],W=_[1],Y=function(){M(0)};d((function(){I&&Y()}),[h,D,j,I]),d((function(){if(0===K)M(1);else if(1===K){var e=P(k.current,!1,D,j);M(2),W(e)}else!function(){try{if(document.activeElement===k.current){var e=k.current,t=e.selectionStart,n=e.selectionEnd,a=e.scrollTop;k.current.setSelectionRange(t,n),k.current.scrollTop=a}}catch(r){}}()}),[K]);var q=e.useRef(),G=function(){v.cancel(q.current)};e.useEffect((function(){return G}),[]);var J=I?L:null,X=f(f({},w),J);return 0!==K&&1!==K||(X.overflowY="hidden",X.overflowX="hidden"),e.createElement(p,{onResize:function(e){2===K&&(null==x||x(e),b&&(G(),q.current=v((function(){Y()}))))},disabled:!(b||x)},e.createElement("textarea",u({},E,{ref:k,style:X,className:t(m,y,n({},"".concat(m,"-disabled"),C)),disabled:C,value:A,onChange:function(e){R(e.target.value),null==z||z(e)}})))})),T=function(t){m(a,t);var n=g(a);function a(e){var t;h(this,a),(t=n.call(this,e)).resizableTextArea=void 0,t.focus=function(){t.resizableTextArea.textArea.focus()},t.saveTextArea=function(e){t.resizableTextArea=e},t.handleChange=function(e){var n=t.props.onChange;t.setValue(e.target.value),n&&n(e)},t.handleKeyDown=function(e){var n=t.props,a=n.onPressEnter,r=n.onKeyDown;13===e.keyCode&&a&&a(e),r&&r(e)};var r=void 0===e.value||null===e.value?e.defaultValue:e.value;return t.state={value:r},t}return b(a,[{key:"setValue",value:function(e,t){"value"in this.props||this.setState({value:e},t)}},{key:"blur",value:function(){this.resizableTextArea.textArea.blur()}},{key:"render",value:function(){return e.createElement(k,u({},this.props,{value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,ref:this.saveTextArea}))}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?{value:e.value}:null}}]),a}(e.Component);const F=Object.freeze(Object.defineProperty({__proto__:null,ResizableTextArea:k,default:T},Symbol.toStringTag,{value:"Module"}));export{E as B,N as I,T,F as e};
